<div class="container mx-auto p-6 sm:p-20">
  <!-- Título principal -->
  <h2
    class="text-4xl sm:text-6xl mb-6 text-center font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 animate-gradient">
    Lista de DNIs
  </h2>

  <!-- Filtros de estado -->
  <div class="mb-6 text-center flex flex-col sm:flex-row justify-center gap-4">
    <button (click)="cambiarFiltroEstado('A')"
      class="px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-500 transition duration-300">
      Mostrar Activos
    </button>
    <button (click)="cambiarFiltroEstado('I')"
      class="px-6 py-3 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition duration-300">
      Mostrar Inactivos
    </button>
  </div>

  <!-- Exportaciones -->
  <div class="export-buttons flex flex-wrap justify-center gap-4 my-6">
    <button
      (click)="exportarExcel()"
      class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded shadow-md transition-transform transform hover:scale-105">
      Exportar a Excel
    </button>
    <button
      (click)="exportarPDF()"
      class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded shadow-md transition-transform transform hover:scale-105">
      Exportar a PDF
    </button>
    <button
      (click)="exportarCSV()"
      class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded shadow-md transition-transform transform hover:scale-105">
      Exportar a CSV
    </button>
  </div>

  <!-- Buscador y Paginador -->
  <div class="flex flex-col sm:flex-row justify-between items-center gap-4 mb-6">
    <!-- Buscador -->
    <div class="relative w-full sm:w-1/3">
      <input
        type="text"
        placeholder="🔍 Buscar por DNI o nombre..."
        [(ngModel)]="searchTerm"
        (ngModelChange)="filtrarDnis()"
        class="w-full px-4 py-2 pl-10 bg-gray-800 text-white border border-gray-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-300">
      <svg
        class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
        width="20"
        height="20">
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M8 16l-4-4m0 0l4-4m-4 4h16" />
      </svg>
    </div>

    <!-- Paginador -->
    <div class="flex items-center space-x-2">
      <button
        (click)="cambiarPagina(currentPage - 1)"
        [disabled]="currentPage === 1"
        class="px-4 py-2 bg-gray-800 text-white border border-gray-600 rounded-lg shadow-sm hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-300 disabled:opacity-50 disabled:cursor-not-allowed">
        Anterior
      </button>
      <span class="text-white px-3 py-2 bg-gray-700 rounded-lg">
        Página {{ currentPage }} de {{ totalPages }}
      </span>
      <button
        (click)="cambiarPagina(currentPage + 1)"
        [disabled]="currentPage === totalPages"
        class="px-4 py-2 bg-gray-800 text-white border border-gray-600 rounded-lg shadow-sm hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-300 disabled:opacity-50 disabled:cursor-not-allowed">
        Siguiente
      </button>
    </div>
  </div>

    <!-- Modal para edición -->
    <div *ngIf="editingDni"
    class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
    <div class="bg-gray-800 rounded-lg shadow-lg p-6 w-full max-w-md">
      <h3 class="text-xl text-white mb-4">Editar DNI</h3>
      <div class="mb-4">
        <label for="dni" class="block text-white">DNI:</label>
        <input id="dni" type="text" [(ngModel)]="editingDni.dni"
          class="w-full px-4 py-2 bg-gray-700 text-white rounded-lg">
      </div>
      <div class="flex justify-end space-x-4">
        <button (click)="guardarEdicion()"
          class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-500 transition duration-300">
          Guardar
        </button>
        <button (click)="cancelarEdicion()"
          class="px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-500 transition duration-300">
          Cancelar
        </button>
      </div>
    </div>
  </div>

  <!-- Tabla -->
  <div class="overflow-x-auto bg-gray-800 rounded-lg shadow-lg">
    <table class="min-w-full table-auto text-white">
      <thead>
        <tr class="bg-gray-700">
          <th class="px-6 py-3 text-left">DNI</th>
          <th class="px-6 py-3 text-left">Nombre</th>
          <th class="px-6 py-3 text-left">Apellido Paterno</th>
          <th class="px-6 py-3 text-left">Apellido Materno</th>
          <th class="px-6 py-3 text-left">Estado</th>
          <th class="px-6 py-3 text-left">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let dni of obtenerDnisPaginados()" class="hover:bg-gray-700">
          <td class="px-6 py-3">{{ dni.dni }}</td>
          <td class="px-6 py-3">{{ dni.nombres }}</td>
          <td class="px-6 py-3">{{ dni.apellidoPaterno }}</td>
          <td class="px-6 py-3">{{ dni.apellidoMaterno }}</td>
          <td class="px-6 py-3">
            <span [class]="dni.status === 'A' ? 'text-green-400' : 'text-red-400'">
              {{ dni.status === 'A' ? 'Activo' : 'Inactivo' }}
            </span>
          </td>
          <td class="px-6 py-3 space-x-2">
            <button *ngIf="dni.status === 'I'" (click)="restaurarDni(dni.id)"
              class="px-6 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-500 transition duration-300">
              Restaurar
            </button>
            <button *ngIf="dni.status === 'A'"
              (click)="eliminarLogicamente(dni.id)"
              class="px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-500 transition duration-300">
              Eliminar
            </button>
            <button *ngIf="dni.status === 'I'"
              (click)="eliminarFisicamente(dni.id)"
              class="px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-500 transition duration-300">
              Eliminar
            </button>
            <button *ngIf="dni.status === 'A'" (click)="editarDni(dni)"
              class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-500 transition duration-300">
              Editar
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
